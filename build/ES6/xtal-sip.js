(function(){class a extends HTMLElement{static get is(){return'xtal-sip'}replaceAll(a,b,c){return a.replace(new RegExp(b,'g'),c)}static getLookup(b){const c=a._lookupMap[b];if(c)if(1<c.length)throw'Duplicate tagname found: '+b;else return c[0]}static loadDependencies(b){b.forEach((b)=>a.loadDependency(b))}static loadDependency(b){a._alreadyAdded[b]=!0;const c=this.getLookup(b);if(!c)return;if(a._alreadyLoaded[c.path])return;if(customElements.get(b))return;let d;c.isScript?(d=document.createElement('script'),d.src=c.path):(d=document.createElement('link'),d.setAttribute('rel','import'),d.setAttribute('href',c.path)),c.async&&d.setAttribute('async',''),setTimeout(()=>{document.head.appendChild(d)},50)}qsa(a,b){return[].slice.call((b?b:this).querySelectorAll(a))}get_h(){for(let a=this.parentElement;a;){if(a.shadowRoot)return a.shadowRoot;a=a.parentElement}return document.body}process_h(b){if(b){const c=a._lookupMap;for(const b in a._alreadyAdded)delete c[b];for(const d in a._alreadyAdded={},c){if(a._alreadyAdded[d])continue;const c=a.getLookup(d);if(c.preemptive){a.loadDependency(d);continue}b.querySelector(d)&&a.loadDependency(d)}}}connectedCallback(){a._lookupMap||(a._lookupMap={},this.qsa('link[rel-ish="preload"]',document.head).forEach((a)=>{const b=a.dataset.async!==void 0,c=a.getAttribute('href');a.dataset.tags.split(',').forEach((b)=>{let d=c,e=0;b.split('-').forEach((a)=>{d=this.replaceAll(d,'\\{'+e+'\\}',a),e++});let f=a.dataset.base;if(!f){const b=a.dataset.baseRef;b&&(f=document.getElementById(b).dataset.base)}f||(f=''),d=f+d;const g=document.createElement('link');g.href=d,g.rel='preload',g.as=a.as,g.dataset.tag=b,g.dataset.preemptive=a.dataset.preemptive,document.head.appendChild(g)})}),this.qsa('link[rel="preload"][data-tag]',document.head).forEach((b)=>{const c=b.dataset.tag;const d={path:b.getAttribute('href'),async:b.dataset.async!==void 0,isScript:'script'===b.as,preemptive:b.dataset.preemptive!==void 0,element:b},e=a._lookupMap[c];if(!e)a._lookupMap[c]=[d];else if(a._tieBreaker){const b=[e[0],d],f=a._tieBreaker(c,b);a._lookupMap[c]=[f]}}));const b=this.getAttribute('load');b?b.split(',').forEach((b)=>{a.loadDependency(b)}):this.process_h(this.parentElement)}}a._alreadyAdded={},a._alreadyLoaded={},a.useJITLoading=!1;const b={};document.head.dispatchEvent(new CustomEvent('xtal-sip-init',{detail:b})),a._tieBreaker=b.tieBreaker,customElements.define('xtal-sip',a),setTimeout(()=>{const a=document.createElement('xtal-sip');a.setAttribute('load','dom-bind'),document.body.appendChild(a)},50)})();