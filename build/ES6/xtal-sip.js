(function(){class a extends HTMLElement{static get is(){return'xtal-sip'}replaceAll(a,b,c){return a.replace(new RegExp(b,'g'),c)}static getLookup(b){const c=a._lookupMap[b];if(c)if(1<c.length)throw'Duplicate tagname found: '+b;else return c[0]}static loadDependencies(b){b.forEach((b)=>a.loadDependency(b))}static loadDependency(b){a._alreadyAdded[b]=!0;const c=this.getLookup(b);if(!c)return;if(a._alreadyLoaded[c.path])return;if(customElements.get(b))return;let d,e=document.head;c.isScript?(d=document.createElement('script'),d.src=c.path):c.isCCRef?(d=document.createElement('c-c'),d.setAttribute('href',c.path),e=document.body):(d=document.createElement('link'),d.setAttribute('rel','import'),d.setAttribute('href',c.path)),c.async&&d.setAttribute('async',''),setTimeout(()=>{e.appendChild(d)},50)}qsa(a,b){return[].slice.call((b?b:this).querySelectorAll(a))}get_h(){for(let a=this.parentElement;a;){if(a.shadowRoot)return a.shadowRoot;a=a.parentElement}return document.body}process_h(b){if(b){const c=a._lookupMap;for(const b in a._alreadyAdded)delete c[b];for(const d in a._alreadyAdded={},c){if(a._alreadyAdded[d])continue;const c=a.getLookup(d);if(c.preemptive){a.loadDependency(d);continue}b.querySelector(d)&&a.loadDependency(d)}}}connectedCallback(){if(!a._lookupMap){a._lookupMap={};const c={};this.qsa('link[rel-ish="preload"]',document.head).forEach((b)=>{a._substitutor&&a._substitutor(b),b.dataset.tags.split(',').forEach((a)=>{c[a]||(c[a]=[]),c[a].push(b)})});const d=[];for(var b in c){const e=c[b];let f;if(1===e.length?f=e[0]:a._tieBreaker&&(f=a._tieBreaker(b,e)),f){if(f.alreadyAdded)continue;f.alreadyAdded=!0,d.push(f)}}d.forEach((a)=>{const b=a.dataset.async!==void 0,c=a.getAttribute('href');a.dataset.tags.split(',').forEach((b)=>{let d=c,e=0;b.split('-').forEach((a)=>{d=this.replaceAll(d,'\\{'+e+'\\}',a),e++});let f=a.dataset.base;if(!f){const b=a.dataset.baseRef;b&&(f=document.getElementById(b).dataset.base)}f||(f=''),d=f+d;const g=document.createElement('link');g.href=d,g.rel='preload',g.setAttribute('as',a.getAttribute('as')),g.dataset.tag=b,Object.assign(g.dataset,a.dataset),document.head.appendChild(g)})}),this.qsa('link[rel="preload"][data-tag]',document.head).forEach((b)=>{const c=b.dataset.tag;const d={path:b.getAttribute('href'),async:b.dataset.async!==void 0,isScript:'script'===b.getAttribute('as'),isCCRef:'c-c'===b.dataset.importer,preemptive:b.dataset.preemptive!==void 0,element:b},e=a._lookupMap[c];e||(a._lookupMap[c]=[]),a._lookupMap[c].push(d)})}const c=this.getAttribute('load');c?c.split(',').forEach((b)=>{a.loadDependency(b)}):this.process_h(this.parentElement)}}a._alreadyAdded={},a._alreadyLoaded={},a.useJITLoading=!1;const b={};document.head.dispatchEvent(new CustomEvent('xtal-sip-init',{detail:b})),a._tieBreaker=b.tieBreaker,a._substitutor=b.substitutor,customElements.define('xtal-sip',a),setTimeout(()=>{const a=document.createElement('xtal-sip');a.setAttribute('load','dom-bind'),document.body.appendChild(a)},50)})();