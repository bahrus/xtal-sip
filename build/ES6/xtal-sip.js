(function(){function a(){e.init(),customElements.define(b,e)}const b='xtal-sip';if(customElements.get(b))return;const c=customElements.define,d=c.bind(customElements);customElements.define=function(a,b){const c=e.get(a);c&&Object.assign(b,c.dataset),d(a,b)};class e extends HTMLElement{static replace(a,b,c){return a.replace(new RegExp(b,'g'),c)}static get(a){return document.head.querySelector(`link[rel="preload"][data-tag="${a}"]`)}static loadDeps(a){a.forEach((a)=>e.loadDep(a))}static loadDep(a){e._added[a]=!0;const b=this.get(a);if(!b)return;const c=b,f=c.dataset;if(customElements.get(a))return;let d,g;switch(c.getAttribute('as')){case'document':d='link',g='href';break;case'script':d='script',g='src';break;case'fetch':d='c-c',g='href';}let h=f.importer?document.body:document.head;const i=document.createElement(d);i.setAttribute(g,c.getAttribute('href')),i.setAttribute('rel','import'),c.async&&i.setAttribute('async',''),setTimeout(()=>{h.appendChild(i)},50)}static qsa(a,b){return[].slice.call(b.querySelectorAll(a))}static init(){const a={};this.qsa('link[rel-ish="preload"]',document.head).forEach((b)=>{e._sub&&e._sub(b),b.dataset.tags.split(',').forEach((c)=>{a[c]||(a[c]=[]),a[c].push(b)})});const b=[];for(var c in a){const d=a[c];let f;if(1===d.length?f=d[0]:e._tB&&(f=e._tB(c,d)),f){if(f._a)continue;f._a=!0,b.push(f)}}b.forEach((a)=>{const b=a.getAttribute('href');a.dataset.tags.split(',').forEach((c)=>{let e=b,f=0;c.split('-').forEach((a)=>{e=this.replace(e,'\\{'+f+'\\}',a),f++});const g=a.dataset;let d=g.base||(g.baseRef?document.querySelector(g.baseRef).dataset.base:'');e=d+e;const h=a.cloneNode();h.href=e,h.dataset.tag=c,h.rel='preload',document.head.appendChild(h)})})}connectedCallback(){this.getAttribute('load').split(',').forEach((a)=>{e.loadDep(a)})}}e._added={};const f={};document.head.dispatchEvent(new CustomEvent(b+'-init',{detail:f})),e._tB=f.tieBreaker,e._sub=f.substitutor,'loading'===document.readyState?document.addEventListener('DOMContentLoaded',()=>{a()}):a()})();