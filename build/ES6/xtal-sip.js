(function(){class a extends HTMLElement{static get is(){return'xtal-sip'}replaceAll(a,b,c){return a.replace(new RegExp(b,'g'),c)}loadDependency(b){a._alreadyAdded[b]=!0;let c,d=a._lookupMap[b];d.isScript?(c=document.createElement('script'),c.src=d.path):(c=document.createElement('link'),c.setAttribute('rel','import'),c.setAttribute('href',d.path)),d.async&&c.setAttribute('async',''),setTimeout(()=>{document.head.appendChild(c)},50)}qsa(a,b){return[].slice.call((b?b:this).querySelectorAll(a))}get_h(){for(let a=this.parentElement;a;){if(a.shadowRoot)return a.shadowRoot;a=a.parentElement}return document.body}process_h(b){if(b)for(const c in a._lookupMap)a._alreadyAdded[c]||(a._preemptive[c]||b.querySelector(c)||this.parentElement.querySelector(c))&&this.loadDependency(c)}connectedCallback(){a._lookupMap||(document.body.addEventListener('dom-change',(a)=>{const b=a.srcElement;this.process_h(b),this.process_h(b.previousElementSibling)}),a._lookupMap={},this.qsa('link[rel-ish="preload"]',document.head).forEach((b)=>{const c=b.dataset.preemptive!==void 0,d=b.dataset.async!==void 0,e=b.getAttribute('href');b.dataset.tags.split(',').forEach((d)=>{c&&(a._preemptive[d]=!0);let f=e,g=0;d.split('-').forEach((a)=>{f=this.replaceAll(f,'\\{'+g+'\\}',a),g++});const h=document.createElement('link');h.href=f,h.rel='preload',h.as=b.as,h.dataset.tag=d,document.head.appendChild(h)})}),this.qsa('link[rel="preload"][data-tag]',document.head).forEach((b)=>{const c=b.dataset.tag;a._lookupMap[c]={path:b.getAttribute('href'),async:b.dataset.async!==void 0,isScript:'script'===b.as},a._preemptive[c]=b.dataset.preemptive!==void 0}));const b=this.get_h();this.process_h(b)}}a._alreadyAdded={},a._preemptive={},customElements.define('xtal-sip',a)})();