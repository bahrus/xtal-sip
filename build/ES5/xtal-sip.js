(function(){var a=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:'replaceAll',value:function(a,b,c){return a.replace(new RegExp(b,'g'),c)}},{key:'loadDependency',value:function(a){b._alreadyAdded[a]=!0;var c,d=b._lookupMap[a];d.isScript?(c=document.createElement('script'),c.src=d.path):(c=document.createElement('link'),c.setAttribute('rel','import'),c.setAttribute('href',d.path)),d.async&&c.setAttribute('async',''),setTimeout(function(){document.head.appendChild(c)},50)}},{key:'qsa',value:function(a,b){return[].slice.call((b?b:this).querySelectorAll(a))}},{key:'get_h',value:function(){for(var a=this.parentElement;a;){if(a.shadowRoot)return a.shadowRoot;a=a.parentElement}return document.body}},{key:'process_h',value:function(a){if(a)for(var c in b._lookupMap)b._alreadyAdded[c]||(b._preemptive[c]||a.querySelector(c)||this.parentElement.querySelector(c))&&this.loadDependency(c)}},{key:'connectedCallback',value:function(){var a=this;b._lookupMap||(document.body.addEventListener('dom-change',function(b){var c=b.srcElement;a.process_h(c),a.process_h(c.previousElementSibling)}),b._lookupMap={},this.qsa('link[rel-ish="preload"]',document.head).forEach(function(c){var d=void 0!==c.dataset.preemptive,e=void 0!==c.dataset.async,f=c.getAttribute('href');c.dataset.tags.split(',').forEach(function(e){d&&(b._preemptive[e]=!0);var g=f,h=0;e.split('-').forEach(function(b){g=a.replaceAll(g,'\\{'+h+'\\}',b),h++});var i=document.createElement('link');i.href=g,i.rel='preload',i.as=c.as,i.dataset.tag=e,document.head.appendChild(i)})}),this.qsa('link[rel="preload"][data-tag]',document.head).forEach(function(a){var c=a.dataset.tag;b._lookupMap[c]={path:a.getAttribute('href'),async:void 0!==a.dataset.async,isScript:'script'===a.as},b._preemptive[c]=void 0!==a.dataset.preemptive}));var c=this.get_h();this.process_h(c)}}],[{key:'is',get:function(){return'xtal-sip'}}]),b}(HTMLElement);a._alreadyAdded={},a._preemptive={},customElements.define('xtal-sip',a)})();